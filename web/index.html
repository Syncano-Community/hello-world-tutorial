<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Hello</title>
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.pink-deep_purple.min.css">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body id="body">
    <div class="mdl-grid">
      <div class="mdl-layout-spacer"></div>
      <div class="logo mdl-cell mdl-cell--12-col mdl-cell--8-col-tablet mdl-cell--6-col-phone">
        <svg width="50%" height="100%" viewBox="0 0 1068 166" version="1.1" xml:space="preserve" style="margin: 0 auto; display: block; fill-rule: evenodd; clip-rule: evenodd; stroke-linejoin: round; stroke-miterlimit: 1.41421;">
          <path d="M690.732,82.911c0,-31.257 -22.587,-57.038 -54.301,-57.038c-31.713,0 -53.845,25.326 -53.845,56.583c0,31.255 22.587,57.036 54.302,57.036c31.713,0 53.844,-25.324 53.844,-56.581m1.401,79.712l0,-17.599c-14.414,12.553 -33.577,20.249 -55.702,20.249c-29.89,0 -54.253,-13.82 -68.743,-34.828c-14.647,20.971 -39.09,34.819 -68.837,34.819c-49.053,0 -83.276,-37.196 -83.276,-82.372c0,-45.174 34.68,-82.82 83.733,-82.82c20.372,0 38.173,6.43 52.04,17.166c-5.786,7.459 -10.589,15.719 -14.226,24.621c-9.56,-9.881 -22.828,-16.005 -38.271,-16.005c-31.712,0 -53.844,25.326 -53.844,56.583c0,31.255 22.587,56.974 54.301,56.974c31.713,0 53.845,-25.386 53.845,-56.643l0.005,0c0.073,-45.11 34.728,-82.676 83.73,-82.676c49.053,0 83.277,37.188 83.277,82.364l0.031,80.167l-28.063,0Zm-588.352,-148.276c-14.09,-9.019 -30.034,-13.851 -49.252,-13.851c-31.655,0 -54.431,18.674 -54.431,46.46c0,29.606 19.131,39.628 53.066,47.826c29.606,6.832 35.983,12.979 35.983,24.594c0,12.302 -10.933,20.274 -28.241,20.274c-15.391,0 -28.033,-4.537 -40.063,-12.753l-13.01,22.688c15.916,9.96 33.754,14.887 52.391,14.887c33.478,0 56.935,-17.762 56.935,-47.826c0,-26.647 -17.536,-38.717 -51.243,-46.915c-30.516,-7.288 -37.804,-12.755 -37.804,-25.281c0,-10.704 9.564,-19.131 25.963,-19.131c12.291,0 24.42,4.05 36.523,11.738l13.183,-22.71Zm710.572,-13.923c-43.308,0 -70.909,24.984 -70.909,73.291l0,88.7l29.268,0l0,-87.51c0,-30.939 16.01,-47.59 42.184,-47.59c26.175,0 42.185,16.651 42.185,47.59l0,87.51l29.267,0l0,-88.7c0,-48.307 -27.601,-73.291 -70.909,-73.291l-1.086,0Zm224.099,82.468c0,31.257 -22.132,56.581 -53.844,56.581c-31.715,0 -54.302,-25.781 -54.302,-57.036c0,-31.257 22.132,-56.583 53.845,-56.583c31.714,0 54.301,25.781 54.301,57.038m29.432,-0.455c0,-45.176 -34.223,-82.364 -83.276,-82.364c-49.054,0 -83.734,37.646 -83.734,82.819c0,45.176 34.223,82.362 83.277,82.362c49.053,0 83.733,-37.644 83.733,-82.817m-810.254,79.917l29.259,0l0,-88.674c0,-30.689 15.939,-46.386 41.868,-46.386c26.167,0 42.104,16.646 42.104,47.575l0,87.485l29.259,0l0,-88.674c0,-48.293 -27.593,-73.27 -70.888,-73.27c-43.532,0 -71.602,24.977 -71.602,74.696l0,87.248Zm8.816,-159.558l-63.408,105.901l0,53.761l-28.909,0l0,-53.555l-64.181,-106.564l32.697,0.457l45.991,79.609l45.65,-79.609l32.16,0Z" style="fill-rule: nonzero;">
          </path>
        </svg>
      </div>
      <div class="mdl-layout-spacer"></div>
    </div>
    <div class="mdl-grid">
      <div class="mdl-layout-spacer"></div>
      <div class="mdl-cell mdl-cell--6-col mdl-cell--8-col-tablet mdl-cell--6-col-phone">
        <div class="mdl-card mdl-shadow--2dp">
              <div class="mdl-card__title">
                <h2 class="mdl-card__title-text">Hello!</h2>
              </div>
              <div class="mdl-card__supporting-text">
                Please type your first and last name.
              </div>
              <div class="mdl-card__supporting-text">
                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                  <input class="mdl-textfield__input" type="text" id="firstname">
                  <label class="mdl-textfield__label" for="sample3">First Name</label>
                </div>
                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                  <input class="mdl-textfield__input" type="text" id="lastname">
                  <label class="mdl-textfield__label" for="sample3">Last Name</label>
                </div>
              </div>
              <div class="mdl-card__actions mdl-card--border">
                <button
                  id="formButton"
                  class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect"
                  type="submit"
                >
                  Submit
                </button>
              </div>
        </div>
      </div>
      <div class="mdl-layout-spacer"></div>
    </div>
    <div id="demo-snackbar-example" class="mdl-js-snackbar mdl-snackbar">
      <div class="mdl-snackbar__text"></div>
      <button class="mdl-snackbar__action" type="button"></button>
    </div>
  </body>
  <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
  <script defer src="https://unpkg.com/syncano-client/dist/syncano-client.min.js"></script>
  <script>
    r(function(){
    var s = new SyncanoClient('INSTANCE_NAME');
    var formButton = document.getElementById('formButton');
    var body = document.getElementById('body');
    var snackbarContainer = document.getElementById('demo-snackbar-example');

    formButton.addEventListener('click', function(data) {
      submitForm()
    });

    body.onkeypress = function(event) {
      if (event.charCode === 13) {
        submitForm()
        return false;
      }
    };

    function submitForm() {
      var firstname = document.getElementById('firstname').value;
      var lastname = document.getElementById('lastname').value;

      s.post('hello/hello', { firstname, lastname })
        .then(function(res) {
          showSnackbar(res);
      }).catch(function(err){
          if (!err.response) {
            return showSnackbar('It seems you are having network connection issues.')
          }
          const res = err.response
          const data = res.status === 400 ? res.data : 'Ugh, something went wrong!'

          showSnackbar(data);
      })
    }

    function showSnackbar(message) {
      var data = {
        message: message
      };

      snackbarContainer.MaterialSnackbar.showSnackbar(data);
      clearInputFields();
    }

    function clearInputFields() {
      document.getElementById('firstname').value = '';
      document.getElementById('lastname').value = '';
    }
  });

  function r(f){/in/.test(document.readyState)?setTimeout('r('+f+')',9):f()}
  </script>
</html>
